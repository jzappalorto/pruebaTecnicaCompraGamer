<h2>Gesti√≥n de Micros</h2>

<form [formGroup]="form" (ngSubmit)="save()">
  <div>
    <label>Patente:</label>
    <input formControlName="patente" />
  </div>
  <div>
    <label>Marca / Modelo:</label>
    <input formControlName="marcaModelo" />
  </div>
  <button type="submit">{{ editingId === null ? 'Crear' : 'Actualizar' }}</button>
  <button type="button" (click)="cancelEdit()" *ngIf="editingId !== null">Cancelar</button>
</form>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Patente</th>
      <th>Marca / Modelo</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let m of micros">
      <td>{{ m.id }}</td>
      <td>{{ m.patente }}</td>
      <td>{{ m.marcaModelo }}</td>
      <td>
        <button (click)="edit(m)">Editar</button>
        <button (click)="remove(m.id)">Eliminar</button>
        <button (click)="showChofer(m.id)">Chofer</button>
        <button (click)="showChicos(m.id)">Chicos</button>
      </td>
    </tr>
  </tbody>
</table>

<div class="modal-backdrop" *ngIf="modalVisible">
  <div class="modal">
    <h3>Chofer asignado</h3>
    <p>{{ choferNombre }}</p>

    <button (click)="modalVisible = false">Cerrar</button>
  </div>
</div>

<!-- MODAL CHICOS -->
<div class="modal-backdrop" *ngIf="modalChicosVisible">
  <div class="modal">
    <h3>Chicos asignados</h3>

    <div *ngIf="chicosDelMicro.length === 0">
      <p>Sin chicos asignados</p>
    </div>

    <ul *ngIf="chicosDelMicro.length > 0">
      <li *ngFor="let ch of chicosDelMicro">
        {{ ch.nombre }} ({{ ch.dni }})
      </li>
    </ul>

    <button (click)="modalChicosVisible = false">Cerrar</button>
  </div>
</div>
